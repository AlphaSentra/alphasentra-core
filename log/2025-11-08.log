2025-11-08 16:51:44,586 - ERROR - [ERR-0001] - [e003dc32] Failed to update insights collection | Exception: TypeError: upsert must be True or False, was: upsert={'$set': {'tag': 'trending ⇧'}} | From: trending.py:get_trending_instruments()
2025-11-08 17:36:02,926 - ERROR - [ERR-0001] - [f934b9af] Failed to update insights collection | Exception: WriteError: The array filter for identifier 'elem' was not used in the update { $set: { importance: 3, tag: { $cond: { if: { $or: [ { $eq: [ "$tag", null ] }, { $not: { $regexMatch: { input: "$tag", regex: ">trending ⇧" } } } ] }, then: { $concat: [ { $ifNull: [ "$tag", "" ] }, { $cond: [ { $eq: [ "$tag", null ] }, "", ", " ] }, ">trending ⇧" ] }, else: "$tag" } } } }, full error: {'index': 0, 'code': 9, 'errmsg': 'The array filter for identifier \'elem\' was not used in the update { $set: { importance: 3, tag: { $cond: { if: { $or: [ { $eq: [ "$tag", null ] }, { $not: { $regexMatch: { input: "$tag", regex: ">trending ⇧" } } } ] }, then: { $concat: [ { $ifNull: [ "$tag", "" ] }, { $cond: [ { $eq: [ "$tag", null ] }, "", ", " ] }, ">trending ⇧" ] }, else: "$tag" } } } }'} | From: trending.py:get_trending_instruments()
2025-11-08 17:37:21,294 - ERROR - [ERR-0001] - [db42b079] Failed to update insights collection | Exception: WriteError: Document failed validation, full error: {'index': 0, 'code': 121, 'errmsg': 'Document failed validation', 'errInfo': {'failingDocumentId': ObjectId('6905fc8023cc30dc62ba45ea'), 'details': {'operatorName': '$jsonSchema', 'schemaRulesNotSatisfied': [{'operatorName': 'properties', 'propertiesNotSatisfied': [{'propertyName': 'tag', 'details': [{'operatorName': 'bsonType', 'specifiedAs': {'bsonType': 'string'}, 'reason': 'type did not match', 'consideredValue': {'$cond': {'if': {'$or': [{'$eq': ['$tag', None]}, {'$not': {'$regexMatch': {'input': '$tag', 'regex': '>trending ⇧'}}}]}, 'then': {'$concat': [{'$ifNull': ['$tag', '']}, {'$cond': [{'$eq': ['$tag', None]}, '', ', ']}, '>trending ⇧']}, 'else': '$tag'}}, 'consideredType': 'object'}]}]}]}}} | From: trending.py:get_trending_instruments()
2025-11-08 17:38:10,283 - ERROR - [ERR-0001] - [0dc6012f] Failed to update insights collection | Exception: WriteError: Document failed validation, full error: {'index': 0, 'code': 121, 'errmsg': 'Document failed validation', 'errInfo': {'failingDocumentId': ObjectId('6905b6c832416606af1e2270'), 'details': {'operatorName': '$jsonSchema', 'schemaRulesNotSatisfied': [{'operatorName': 'properties', 'propertiesNotSatisfied': [{'propertyName': 'tag', 'details': [{'operatorName': 'bsonType', 'specifiedAs': {'bsonType': 'string'}, 'reason': 'type did not match', 'consideredValue': {'$cond': {'if': {'$or': [{'$eq': ['$tag', None]}, {'$not': {'$regexMatch': {'input': '$tag', 'regex': '>trending ⇧'}}}]}, 'then': {'$concat': [{'$ifNull': ['$tag', '']}, {'$cond': [{'$eq': ['$tag', None]}, '', ', ']}, '>trending ⇧']}, 'else': '$tag'}}, 'consideredType': 'object'}]}]}]}}} | From: trending.py:get_trending_instruments()
